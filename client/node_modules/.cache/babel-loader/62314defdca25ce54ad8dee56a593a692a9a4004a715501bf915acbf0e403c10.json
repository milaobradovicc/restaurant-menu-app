{"ast":null,"code":"import _objectSpread from\"C:/Users/milao/Documents/restaurant-menu-app/restaurant-menu-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{motion}from\"framer-motion\";import\"./Home.css\";import{themes}from\"../themes\";import{useNavigate}from\"react-router-dom\";import{useParams}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){const[kategorije,setKategorije]=useState([]);const[activeThemeKey,setActiveThemeKey]=useState(\"etno\");const activeTheme=themes[activeThemeKey];const slikaSrc=\"\".concat(process.env.REACT_APP_BACKEND_URL);const navigate=useNavigate();const{id}=useParams();// Ovo je ID kategorije\nuseEffect(()=>{const fetchData=()=>{fetch(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/api/categories\")).then(res=>res.json()).then(data=>{const sortirano=data.sort((a,b)=>{var _a$redniBroj,_b$redniBroj;return((_a$redniBroj=a.redniBroj)!==null&&_a$redniBroj!==void 0?_a$redniBroj:0)-((_b$redniBroj=b.redniBroj)!==null&&_b$redniBroj!==void 0?_b$redniBroj:0);});setKategorije(sortirano);}).catch(err=>console.error(\"Greška pri učitavanju kategorija:\",err));};fetchData();const interval=setInterval(()=>{if(localStorage.getItem(\"refreshHomeKategorije\")===\"true\"){fetchData();localStorage.removeItem(\"refreshHomeKategorije\");}},1000);// proverava svake sekunde\nreturn()=>clearInterval(interval);},[]);const containerVariants={hidden:{},visible:{transition:{staggerChildren:0.15// koliko da čeka između kartica\n}}};const cardVariants={hidden:{opacity:0,y:30},visible:{opacity:1,y:0}};return/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",style:_objectSpread(_objectSpread({},activeTheme.backgroundImage?{backgroundImage:\"url(\".concat(activeTheme.backgroundImage,\")\")}:{backgroundColor:activeTheme.backgroundColor}),{},{backgroundSize:\"cover\",backgroundPosition:\"top center\",backgroundRepeat:\"no-repeat\",fontFamily:activeTheme.font,color:activeTheme.textColor}),children:[/*#__PURE__*/_jsx(\"select\",{value:activeThemeKey,onChange:e=>setActiveThemeKey(e.target.value),className:\"theme-selector\",children:Object.keys(themes).map(key=>/*#__PURE__*/_jsx(\"option\",{value:key,children:themes[key].name},key))}),/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsx(motion.img,{src:\"/images/logoRestoran1.png\",alt:\"Logo\",className:\"logo\",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:0.6,ease:\"easeOut\"}})}),/*#__PURE__*/_jsx(motion.div,{className:\"kategorije-grid\",variants:containerVariants,initial:\"hidden\",animate:\"visible\",children:kategorije.map((kat,index)=>{var _kat$slika;return/*#__PURE__*/_jsxs(motion.div,{className:\"kategorija-card\",onClick:()=>navigate(\"/kategorija/\".concat(kat._id)),variants:cardVariants,transition:{duration:0.4,ease:\"easeOut\"},children:[/*#__PURE__*/_jsx(motion.div,{className:\"slika\",style:{backgroundImage:(_kat$slika=kat.slika)!==null&&_kat$slika!==void 0&&_kat$slika.startsWith(\"/uploads/\")?\"url(\".concat(process.env.REACT_APP_BACKEND_URL).concat(kat.slika,\")\"):\"url(\".concat(kat.slika,\")\"),border:\"2px solid \".concat(activeTheme.borderColor),boxShadow:\"0 0 10px \".concat(activeTheme.glowColor)},whileHover:{scale:1.12},whileTap:{scale:1.05},transition:{duration:0.2,ease:\"easeOut\"}}),/*#__PURE__*/_jsx(\"p\",{children:kat.naziv})]},index);})})]});}export default Home;","map":{"version":3,"names":["React","useEffect","useState","motion","themes","useNavigate","useParams","jsx","_jsx","jsxs","_jsxs","Home","kategorije","setKategorije","activeThemeKey","setActiveThemeKey","activeTheme","slikaSrc","concat","process","env","REACT_APP_BACKEND_URL","navigate","id","fetchData","fetch","then","res","json","data","sortirano","sort","a","b","_a$redniBroj","_b$redniBroj","redniBroj","catch","err","console","error","interval","setInterval","localStorage","getItem","removeItem","clearInterval","containerVariants","hidden","visible","transition","staggerChildren","cardVariants","opacity","y","className","style","_objectSpread","backgroundImage","backgroundColor","backgroundSize","backgroundPosition","backgroundRepeat","fontFamily","font","color","textColor","children","value","onChange","e","target","Object","keys","map","key","name","img","src","alt","initial","animate","duration","ease","div","variants","kat","index","_kat$slika","onClick","_id","slika","startsWith","border","borderColor","boxShadow","glowColor","whileHover","scale","whileTap","naziv"],"sources":["C:/Users/milao/Documents/restaurant-menu-app/restaurant-menu-app/client/src/pages/Home.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport \"./Home.css\";\r\nimport { themes } from \"../themes\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nfunction Home() {\r\n  const [kategorije, setKategorije] = useState([]);\r\n  const [activeThemeKey, setActiveThemeKey] = useState(\"etno\");\r\n  const activeTheme = themes[activeThemeKey];\r\n  const slikaSrc = `${process.env.REACT_APP_BACKEND_URL}`;\r\n  const navigate = useNavigate();\r\n  const { id } = useParams(); // Ovo je ID kategorije\r\n\r\n  useEffect(() => {\r\n    const fetchData = () => {\r\n      fetch(`${process.env.REACT_APP_BACKEND_URL}/api/categories`)\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          const sortirano = data.sort(\r\n            (a, b) => (a.redniBroj ?? 0) - (b.redniBroj ?? 0)\r\n          );\r\n          setKategorije(sortirano);\r\n        })\r\n        .catch((err) =>\r\n          console.error(\"Greška pri učitavanju kategorija:\", err)\r\n        );\r\n    };\r\n\r\n    fetchData();\r\n\r\n    const interval = setInterval(() => {\r\n      if (localStorage.getItem(\"refreshHomeKategorije\") === \"true\") {\r\n        fetchData();\r\n        localStorage.removeItem(\"refreshHomeKategorije\");\r\n      }\r\n    }, 1000); // proverava svake sekunde\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const containerVariants = {\r\n    hidden: {},\r\n    visible: {\r\n      transition: {\r\n        staggerChildren: 0.15, // koliko da čeka između kartica\r\n      },\r\n    },\r\n  };\r\n\r\n  const cardVariants = {\r\n    hidden: { opacity: 0, y: 30 },\r\n    visible: { opacity: 1, y: 0 },\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"home-container\"\r\n      style={{\r\n        ...(activeTheme.backgroundImage\r\n          ? { backgroundImage: `url(${activeTheme.backgroundImage})` }\r\n          : { backgroundColor: activeTheme.backgroundColor }),\r\n        backgroundSize: \"cover\",\r\n        backgroundPosition: \"top center\",\r\n        backgroundRepeat: \"no-repeat\",\r\n        fontFamily: activeTheme.font,\r\n        color: activeTheme.textColor,\r\n      }}\r\n    >\r\n      <select\r\n        value={activeThemeKey}\r\n        onChange={(e) => setActiveThemeKey(e.target.value)}\r\n        className=\"theme-selector\"\r\n      >\r\n        {Object.keys(themes).map((key) => (\r\n          <option key={key} value={key}>\r\n            {themes[key].name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n\r\n      <header className=\"header\">\r\n        <motion.img\r\n          src=\"/images/logoRestoran1.png\"\r\n          alt=\"Logo\"\r\n          className=\"logo\"\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.6, ease: \"easeOut\" }}\r\n        />\r\n      </header>\r\n\r\n      <motion.div\r\n        className=\"kategorije-grid\"\r\n        variants={containerVariants}\r\n        initial=\"hidden\"\r\n        animate=\"visible\"\r\n      >\r\n        {kategorije.map((kat, index) => (\r\n          <motion.div\r\n            className=\"kategorija-card\"\r\n            key={index}\r\n            onClick={() => navigate(`/kategorija/${kat._id}`)}\r\n            variants={cardVariants}\r\n            transition={{ duration: 0.4, ease: \"easeOut\" }}\r\n          >\r\n            <motion.div\r\n              className=\"slika\"\r\n              style={{\r\n                backgroundImage: kat.slika?.startsWith(\"/uploads/\")\r\n                  ? `url(${process.env.REACT_APP_BACKEND_URL}${kat.slika})`\r\n                  : `url(${kat.slika})`,\r\n                border: `2px solid ${activeTheme.borderColor}`,\r\n                boxShadow: `0 0 10px ${activeTheme.glowColor}`,\r\n              }}\r\n              whileHover={{ scale: 1.12 }}\r\n              whileTap={{ scale: 1.05 }}\r\n              transition={{ duration: 0.2, ease: \"easeOut\" }}\r\n            />\r\n            <p>{kat.naziv}</p>\r\n          </motion.div>\r\n        ))}\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}