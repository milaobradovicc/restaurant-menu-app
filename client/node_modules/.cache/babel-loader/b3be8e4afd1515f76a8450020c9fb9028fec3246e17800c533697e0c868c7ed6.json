{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import\"./Proizvodi.css\";import{motion,AnimatePresence}from\"framer-motion\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Proizvodi(){const{id}=useParams();const navigate=useNavigate();const[proizvodi,setProizvodi]=useState([]);const[kategorijaNaziv,setKategorijaNaziv]=useState(\"\");const[showScrollTop,setShowScrollTop]=useState(false);const[prikaziLogo,setPrikaziLogo]=useState(true);const[prikaziPopup,setPrikaziPopup]=useState(false);const[popupSlika,setPopupSlika]=useState(\"\");useEffect(()=>{fetch(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/api/products/kategorija/\").concat(id)).then(res=>res.json()).then(data=>{setProizvodi(data.proizvodi||[]);setKategorijaNaziv(data.kategorija||\"Kategorija\");document.title=\"Kategorija: \".concat(data.kategorija||\"Kategorija\");}).catch(err=>{console.error(\"Greška pri učitavanju proizvoda:\",err);});},[id]);useEffect(()=>{const handleScroll=()=>{setShowScrollTop(window.scrollY>100);};window.addEventListener(\"scroll\",handleScroll);return()=>window.removeEventListener(\"scroll\",handleScroll);},[]);useEffect(()=>{const handleScroll=()=>{setPrikaziLogo(window.scrollY<100);};window.addEventListener(\"scroll\",handleScroll);return()=>window.removeEventListener(\"scroll\",handleScroll);},[]);const defaultImage=\"/images/logoRestoran1.png\";// <- zameni ako treba\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"proizvodi-page\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"back-btn\",onClick:()=>navigate(\"/\"),children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u2190 \"}),\"Nazad\"]}),prikaziLogo&&/*#__PURE__*/_jsx(motion.img,{src:\"/images/logoRestoran1.png\",alt:\"Logo\",className:\"logo-fixed\",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:0.5,delay:0.3}}),/*#__PURE__*/_jsx(motion.h2,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:0.6},className:\"kategorija-naslov\",children:kategorijaNaziv}),/*#__PURE__*/_jsx(\"div\",{className:\"proizvodi-lista\",children:proizvodi.map((p,index)=>/*#__PURE__*/_jsxs(motion.div,{className:\"proizvod\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.4,delay:index*0.15},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"proizvod-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:p.naziv}),/*#__PURE__*/_jsx(\"p\",{children:p.opis}),/*#__PURE__*/_jsxs(\"div\",{className:\"cena\",children:[p.cena.toFixed(2),\" RSD\"]})]}),/*#__PURE__*/_jsx(\"img\",{src:p.slika?p.slika.startsWith(\"/uploads/\")?\"\".concat(process.env.REACT_APP_BACKEND_URL).concat(p.slika):p.slika:defaultImage,alt:p.naziv,className:\"proizvod-slika\",onClick:()=>{setPopupSlika(p.slika?p.slika.startsWith(\"/uploads/\")?\"\".concat(process.env.REACT_APP_BACKEND_URL).concat(p.slika):p.slika:defaultImage);setPrikaziPopup(true);}})]},p._id))}),showScrollTop&&/*#__PURE__*/_jsx(motion.button,{className:\"scroll-top\",onClick:()=>window.scrollTo({top:0,behavior:\"smooth\"}),initial:{opacity:0,scale:0.5},animate:{opacity:1,scale:1},transition:{type:\"spring\",stiffness:300,damping:20},children:\"\\u2191\"}),/*#__PURE__*/_jsx(AnimatePresence,{children:prikaziPopup&&/*#__PURE__*/_jsx(motion.div,{className:\"popup-overlay\",onClick:()=>setPrikaziPopup(false),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:/*#__PURE__*/_jsxs(motion.div,{className:\"popup-box\",onClick:e=>e.stopPropagation(),initial:{scale:0.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0.8,opacity:0},transition:{duration:0.3},children:[/*#__PURE__*/_jsx(\"img\",{src:popupSlika,alt:\"Preview\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPrikaziPopup(false),className:\"zatvori-btn\",children:\"Zatvori \\u2716\"})]})})})]});}export default Proizvodi;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","motion","AnimatePresence","jsx","_jsx","jsxs","_jsxs","Proizvodi","id","navigate","proizvodi","setProizvodi","kategorijaNaziv","setKategorijaNaziv","showScrollTop","setShowScrollTop","prikaziLogo","setPrikaziLogo","prikaziPopup","setPrikaziPopup","popupSlika","setPopupSlika","fetch","concat","process","env","REACT_APP_BACKEND_URL","then","res","json","data","kategorija","document","title","catch","err","console","error","handleScroll","window","scrollY","addEventListener","removeEventListener","defaultImage","className","children","onClick","img","src","alt","initial","opacity","y","animate","transition","duration","delay","h2","x","map","p","index","div","naziv","opis","cena","toFixed","slika","startsWith","_id","button","scrollTo","top","behavior","scale","type","stiffness","damping","exit","e","stopPropagation"],"sources":["C:/Users/milao/Documents/restaurant-menu-app/restaurant-menu-app/client/src/pages/Proizvodi.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport \"./Proizvodi.css\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\nfunction Proizvodi() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [proizvodi, setProizvodi] = useState([]);\r\n  const [kategorijaNaziv, setKategorijaNaziv] = useState(\"\");\r\n  const [showScrollTop, setShowScrollTop] = useState(false);\r\n  const [prikaziLogo, setPrikaziLogo] = useState(true);\r\n  const [prikaziPopup, setPrikaziPopup] = useState(false);\r\n  const [popupSlika, setPopupSlika] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetch(`${process.env.REACT_APP_BACKEND_URL}/api/products/kategorija/${id}`)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setProizvodi(data.proizvodi || []);\r\n        setKategorijaNaziv(data.kategorija || \"Kategorija\");\r\n        document.title = `Kategorija: ${data.kategorija || \"Kategorija\"}`;\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Greška pri učitavanju proizvoda:\", err);\r\n      });\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      setShowScrollTop(window.scrollY > 100);\r\n    };\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => window.removeEventListener(\"scroll\", handleScroll);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      setPrikaziLogo(window.scrollY < 100);\r\n    };\r\n\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => window.removeEventListener(\"scroll\", handleScroll);\r\n  }, []);\r\n\r\n  const defaultImage = \"/images/logoRestoran1.png\"; // <- zameni ako treba\r\n\r\n  return (\r\n    <div className=\"proizvodi-page\">\r\n      {/* Dugme Nazad */}\r\n      <button className=\"back-btn\" onClick={() => navigate(\"/\")}>\r\n        <b>← </b>Nazad\r\n      </button>\r\n\r\n      {/* Logo u gornjem desnom uglu */}\r\n      {prikaziLogo && (\r\n        <motion.img\r\n          src=\"/images/logoRestoran1.png\"\r\n          alt=\"Logo\"\r\n          className=\"logo-fixed\"\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.5, delay: 0.3 }}\r\n        />\r\n      )}\r\n\r\n      <motion.h2\r\n        initial={{ opacity: 0, x: -30 }}\r\n        animate={{ opacity: 1, x: 0 }}\r\n        transition={{ duration: 0.6 }}\r\n        className=\"kategorija-naslov\"\r\n      >\r\n        {kategorijaNaziv}\r\n      </motion.h2>\r\n\r\n      <div className=\"proizvodi-lista\">\r\n        {proizvodi.map((p, index) => (\r\n          <motion.div\r\n            className=\"proizvod\"\r\n            key={p._id}\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.4, delay: index * 0.15 }}\r\n          >\r\n            <div className=\"proizvod-info\">\r\n              <h3>{p.naziv}</h3>\r\n              <p>{p.opis}</p>\r\n              <div className=\"cena\">{p.cena.toFixed(2)} RSD</div>\r\n            </div>\r\n            <img\r\n              src={\r\n                p.slika\r\n                  ? p.slika.startsWith(\"/uploads/\")\r\n                    ? `${process.env.REACT_APP_BACKEND_URL}${p.slika}`\r\n                    : p.slika\r\n                  : defaultImage\r\n              }\r\n              alt={p.naziv}\r\n              className=\"proizvod-slika\"\r\n              onClick={() => {\r\n                setPopupSlika(\r\n                  p.slika\r\n                    ? p.slika.startsWith(\"/uploads/\")\r\n                      ? `${process.env.REACT_APP_BACKEND_URL}${p.slika}`\r\n                      : p.slika\r\n                    : defaultImage\r\n                );\r\n                setPrikaziPopup(true);\r\n              }}\r\n            />\r\n          </motion.div>\r\n        ))}\r\n      </div>\r\n\r\n      {showScrollTop && (\r\n        <motion.button\r\n          className=\"scroll-top\"\r\n          onClick={() => window.scrollTo({ top: 0, behavior: \"smooth\" })}\r\n          initial={{ opacity: 0, scale: 0.5 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\r\n        >\r\n          ↑\r\n        </motion.button>\r\n      )}\r\n      <AnimatePresence>\r\n        {prikaziPopup && (\r\n          <motion.div\r\n            className=\"popup-overlay\"\r\n            onClick={() => setPrikaziPopup(false)}\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n          >\r\n            <motion.div\r\n              className=\"popup-box\"\r\n              onClick={(e) => e.stopPropagation()}\r\n              initial={{ scale: 0.8, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.8, opacity: 0 }}\r\n              transition={{ duration: 0.3 }}\r\n            >\r\n              <img src={popupSlika} alt=\"Preview\" />\r\n              <button\r\n                onClick={() => setPrikaziPopup(false)}\r\n                className=\"zatvori-btn\"\r\n              >\r\n                Zatvori ✖\r\n              </button>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Proizvodi;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}